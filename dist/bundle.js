!function(e){function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}var t={};a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p="",a(a.s=0)}([function(e,a,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(){var e=S.node().offsetWidth;C!==e&&(C=e,u.default.resize(),f.default.resize(),p.default.resize(),g.default.resize(),v.default.resize())}var i=t(1),s=n(i),o=t(3),l=n(o),c=t(4),u=n(c),d=t(5),f=n(d),h=t(6),p=n(h),m=t(7),g=n(m),y=t(8),v=n(y),S=d3.select("body"),C=0;!function(){S.classed("is-mobile",l.default.any()),window.addEventListener("resize",(0,s.default)(r,150)),u.default.init(),f.default.init(),p.default.init(),g.default.init(),v.default.init()}()},function(e,a,t){(function(a){function t(e,a,t){function r(a){var t=m,n=g;return m=g=void 0,B=a,v=e.apply(n,t)}function i(e){return B=e,S=setTimeout(u,a),F?r(e):v}function l(e){var t=e-A,n=e-B,r=a-t;return w?b(r,y-n):r}function c(e){var t=e-A,n=e-B;return void 0===A||t>=a||t<0||w&&n>=y}function u(){var e=k();if(c(e))return d(e);S=setTimeout(u,l(e))}function d(e){return S=void 0,x&&m?r(e):(m=g=void 0,v)}function f(){void 0!==S&&clearTimeout(S),B=0,m=A=g=S=void 0}function h(){return void 0===S?v:d(k())}function p(){var e=k(),t=c(e);if(m=arguments,g=this,A=e,t){if(void 0===S)return i(A);if(w)return S=setTimeout(u,a),r(A)}return void 0===S&&(S=setTimeout(u,a)),v}var m,g,y,v,S,A,B=0,F=!1,w=!1,x=!0;if("function"!=typeof e)throw new TypeError(o);return a=s(a)||0,n(t)&&(F=!!t.leading,w="maxWait"in t,y=w?C(s(t.maxWait)||0,a):y,x="trailing"in t?!!t.trailing:x),p.cancel=f,p.flush=h,p}function n(e){var a=typeof e;return!!e&&("object"==a||"function"==a)}function r(e){return!!e&&"object"==typeof e}function i(e){return"symbol"==typeof e||r(e)&&S.call(e)==c}function s(e){if("number"==typeof e)return e;if(i(e))return l;if(n(e)){var a="function"==typeof e.valueOf?e.valueOf():e;e=n(a)?a+"":a}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var t=f.test(e);return t||h.test(e)?p(e.slice(2),t?2:8):d.test(e)?l:+e}var o="Expected a function",l=NaN,c="[object Symbol]",u=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,h=/^0o[0-7]+$/i,p=parseInt,m="object"==typeof a&&a&&a.Object===Object&&a,g="object"==typeof self&&self&&self.Object===Object&&self,y=m||g||Function("return this")(),v=Object.prototype,S=v.toString,C=Math.max,b=Math.min,k=function(){return y.Date.now()};e.exports=t}).call(a,t(2))},function(e,a){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={android:function(){return navigator.userAgent.match(/Android/i)},blackberry:function(){return navigator.userAgent.match(/BlackBerry/i)},ios:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},opera:function(){return navigator.userAgent.match(/Opera Mini/i)},windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return n.android()||n.blackberry()||n.ios()||n.opera()||n.windows()}};a.default=n},function(e,a,t){"use strict";function n(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}function r(e){for(var a=0;a<100;a++)!function(a){function t(){n.append("p.menu-title").html(C[a].key),n.append("p.menu-subtitle").html(k[C[a].key]+" restaurants");var t=n.append("svg"),r=C[a].values.length;r>30&&(r=30);var i=C[a].values.slice(0,r),s=$(".menu").width();t.at("class","tables").at("width",s).at("height",13*r+20).style("overflow","visible");var o=d3.scaleLinear().domain([0,1]).range([0,s/2]),l=d3.axisTop(o).tickValues([0,.25,.5,.75,1]).tickSize(13*-(r-2)).tickFormat(d3.format(".0%")),c=(t.append("g").at("transform","translate(100, 20)").at("class","grid").style("stroke-dasharray","3 3").call(l).selectAll("text").style("font-size","12px !important"),d3.scaleBand().domain(i.map(function(e){return e.bigram})).range([20,13*r]));t.append("g").at("class","axis").at("transform","translate(100, 0)").call(d3.axisLeft(c)).selectAll("text").style("font-size","12px !important");t.selectAll("rect.chart").data(i).enter().append("rect").at("class","bar-rect change"+a).at("x",o(0)+100).at("y",function(e){return c(e.bigram)}).at("width",function(e){return o(e.count/k[e.category])}).at("height",10).style("fill",function(a){return parseInt(a.count/k[a.category]*100)>e?"#BF3841":"#ECA94A"});for(var u=0;parseInt(C[a].values[u].count/k[C[a].key]*100)>30;)u,u++}var n=null;A.asian.includes(C[a].key)?("Chinese"==C[a].key&&(n=p.append("div.menu"),t(),function(){for(var e=0;e<3;e++){var t=m.append("div.rand-menu");t.append("p.rand-menu-title").html("Random Menu #"+(e+1));for(var n=0;n<C[a].values.length;n++){var r=C[a].values[n].bigram,i=C[a].values[n].count/k[C[a].key];Math.random()<+i&&+i>.3&&t.append("p.random").html(r)}}}()),n=y.append("div.menu"),t()):A.other.includes(C[a].key)&&("American"==C[a].key&&function(){for(var e=0;e<3;e++){var t=g.append("div.rand-menu2");t.append("p.rand-menu-title").html("Random Menu #"+(e+1));for(var n=0;n<30;n++){var r=C[a].values[n].bigram,i=C[a].values[n].count/k[C[a].key];Math.random()<i&&t.append("p.random").html(r)}}}(),n=v.append("div.menu"),t()),d3.select("#shuffle").on("click",function(){$(".rand-menu").remove();for(var e=0;e<3;e++){var a=m.append("div.rand-menu");a.append("p.rand-menu-title").html("Random Menu #"+(e+1));for(var t=0;t<30;t++){var n=C[0].values[t].bigram,r=C[0].values[t].count/k[C[0].key];Math.random()<+r&&a.append("p.random").html(n)}}}),d3.select("#shuffle2").on("click",function(){$(".rand-menu2").remove();for(var e=0;e<3;e++){var a=g.append("div.rand-menu2");a.append("p.rand-menu-title").html("Random Menu #"+(e+1));for(var t=0;t<30;t++){var n=C[2].values[t].bigram,r=C[2].values[t].count/k[C[2].key];Math.random()<+r&&a.append("p.random").html(n)}}})}(a)}function i(e){d3.selectAll(".bar-rect").transition().style("fill",function(a){return parseInt(a.count/k[a.category]*100)>e?"#BF3841":"#ECA94A"})}function s(){if((b=d3.select(".graphic").node().offsetWidth)>800){var e=$(".menu").width();d3.selectAll(".tables").transition().at("width",e);var a=d3.scaleLinear().domain([0,1]).range([0,e/2]),t=d3.axisTop(a).tickValues([0,.25,.5,.75,1]).tickSize(-364).tickFormat(d3.format(".0%"));d3.selectAll(".grid").style("stroke-dasharray","3 3").call(t).selectAll("text").style("font-size","12px !important"),d3.selectAll(".bar-rect").transition().at("width",function(e){return a(e.count/k[e.category])})}}function o(){s()}function l(){var e,a=["finiti/shared_food","finiti/cuisine_count"].map(function(e){return"assets/data/"+e+".csv"});(e=d3).loadData.apply(e,n(a).concat([function(e,a){S=a[0],C=d3.nest().key(function(e){return e.category}).entries(S),C.sort(function(e,a){return+k[a.key]-+k[e.key]}),C.forEach(function(e){e.values.sort(function(e,a){return a.count-e.count})}),r(30),o()}]))}Object.defineProperty(a,"__esModule",{value:!0});var c=d3.select(".part1-chinese"),u=d3.select(".part1-probability"),d=d3.select(".part1-probability2"),f=d3.select(".part1a"),h=d3.select(".part1b"),p=c.select(".graphic"),m=u.select(".graphic"),g=d.select(".graphic"),y=f.select(".graphic"),v=h.select(".graphic"),S=null,C=null,b=d3.select(".graphic").node().offsetWidth;$("#myRange").on("input",function(){var e=$(this).val();$("#value").html(e+"%"),i(e)});var k={"Home Cooking":1,Spanish:8,Chinese:139,Caterers:40,Asian:137,Italian:53,Mediterranean:27,European:20,Thai:18,American:130,"Contemporary American":13,Mexican:27,"Latin American":18,Pizza:21,"Hamburgers and Hot Dogs":8,Burgers:13,"Hot Dogs":5,Continental:13,"Breakfast and Brunch":53,"Middle Eastern and African":1,"Middle Eastern":8,Vegetarian:16,Steakhouse:7,Chicken:6,"Bar and Grills":8,Dessert:5,"Steak Houses":3,Healthy:11,Greek:7,"Vegetarian Friendly":33,"Family Style":42,"Take Out":37,"Food Delivery Service":1,"Fast Food":35,"Delivery Service":3,Delivery:3,"Sandwiches/Subs":1,"Desserts/Ice Cream":1,Seafood:55,"Traditional American":14,Southern:3,Latin:5,Southwestern:3,"Steak House":3,"American (Traditional)":1,"Coffee and Espresso":11,"Coffee Shops":18,"Coffee House":9,"Coffee and Tea":17,Barbecue:10,Bakery:7,"Natural and Organic Foods":3,"Deli and Sandwich":17,Cafe:22,Bar:42,"Dim Sum":16,Mongolian:3,Sushi:23,Japanese:65,"Asian/Pacific":21,"Noodle Shop":6,"Gluten Free Options":11,"Southeast Asian":12,"Sandwich Shops":10,Sandwiches:11,"Breakfast Brunch and Lunch":18,"Sports Bars":1,Breakfast:14,"Brunch and Lunch":12,Pubs:11,Pub:10,Soups:11,Burger:1,Diners:4,"Night Clubs":5,Bars:9,"Cocktail Lounges":1,"Dance Clubs":1,"Contemporary Asian":1,Lounge:1,Vegan:3,"Health Food":5,French:29,"Fine Dining":5,"Tapas / Small Plates":4,"Contemporary French / American":1,Chain:4,"Sushi Bars":10,Delicatessen:2,Delicatessens:9,Malaysian:3,Vietnamese:10,"Vegan Options":12,"Ice Cream and Frozen Desserts":3,Cafeterias:8,"Ice Cream":4,Bagels:3,"Donut Shops":2,Bakeries:5,Donuts:2,Deli:5,Yogurt:2,Diner:4,Contemporary:3,Beverages:2,"Fast food":1,Bistro:2,"Bar Food":2,Hawaiian:5,Taverns:5,Cheesesteak:1,Hamburgers:4,Korean:6,Californian:12,"New American":3,"Food Trucks":1,"Southern / Soul":1,"Asian Fusion":2,Fusion:5,German:1,Filipino:1,Indian:11,"Gastro Pub":1,Brasserie:1,"Comfort Food":3,"Brazilian Steakhouse":1,Caribbean:2,Cuban:1,"Banquet Halls and Reception Facilities":3,"Creole and Cajun":1,Irish:9,"Supermarkets and Super Stores":1,Kosher:1,Brazilian:2,"South American":1,"Wine Bar":1,Steak:1,Fries:1,Shakes:1,"Cajun/Creole":1,Turkish:1,Cambodian:1,Taiwanese:2,"Meat Markets":1,Ramen:1,"Juice and Smoothies":1,"Bubble Tea":1,"Grocery Stores":1,"Coffee and Tea-Wholesale and Manufacturers":1,Provencal:1,Omelets:1,"Ice Cream and Desserts":2,Singaporean:1,Crepes:1,Polynesian:1,Salad:1},A={asian:["Chinese","Japanese","Thai","Indian","Vietnamese"],other:["American","Italian","French","Mediterranean","Mexican"]};a.default={init:l,resize:o}},function(e,a,t){"use strict";function n(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}function r(e,a){F=30,F=A<500?15:A<600&&A>=501?20:30;var t=C[e],n=b[e];w.domain(t).range([0,t.length*(F+2)]),x.domain(n).range([0,n.length*(F+2)]),D=d3.axisTop(w),T=d3.axisLeft(x),M.at("width",t.length*(F+2)+200).at("height",n.length*(F+2)+150).style("overflow","visible"),I.at("transform","translate(120, 60)").style("stroke-width",0).call(D).selectAll("text").style("text-anchor","start").at("transform",function(){return A<640?"rotate(-90) translate(3, 13)":"rotate(-55) translate(3, 10)"}).style("font-size",12).style("font-weight",700),H.at("transform","translate(120, 60)").style("stroke-width",0).call(T).selectAll("text").style("font-size",12).at("transform","translate(4, 2)").style("font-weight",700)}function i(e,a){c(a),d3.selectAll("text.widget-svg").remove(),d3.selectAll("rect.widget-svg").remove();var t=C[e],n=b[e];F=30,"all"==e?F=20:A<500?F=15:A<640&&A>=501?F=25:B>1300&&(F=30),w.domain(t).range([0,t.length*(F+2)]),x.domain(n).range([0,n.length*(F+2)]),D=d3.axisTop(w),T=d3.axisLeft(x),M.at("width",t.length*(F+2)+200).at("height",100).at("class",e).style("overflow","visible");var r=d3.tip().offset([-20,0]).attr("class","d3-tip-heatmap").html(function(e,a,t,n){return"<span class='bold'>"+e+"</span><br>Occurs in <span class='bold'>"+parseInt(100*t)+"%</span> of <span class='bold'>"+n+" "+a+" </span>restaurants"});M.call(r),I.transition().call(D).selectAll("text").style("text-anchor","start").at("transform","rotate(-55) translate(3, 10)").style("font-size",12).style("font-weight",700),H.transition().call(T).selectAll("text").style("font-size",12).at("transform","translate(4, 2)").style("font-weight",700),k[e].forEach(function(e){e.values.forEach(function(e){M.append("rect").at("class","widget-svg").at("x",w(e.category)+123).at("y",x(e.bigram)+63).at("width",F).at("height",F).at("rx",5).at("ry",5).style("fill",function(){return isNaN(w(e.category))?"none":P(e.count/O[e.category])}),M.append("text").at("class","h-text widget-svg").at("x",w(e.category)+123+F/2).at("y",x(e.bigram)+63+F/2).text(function(){return parseInt(e.count/O[e.category]*100)})})})}function s(){}function o(){A=d3.select(".prose-text").node().offsetWidth,s(),i(v,S)}function l(){var e,a=["finiti/shared_food"].map(function(e){return"assets/data/"+e+".csv"});(e=d3).loadData.apply(e,n(a).concat([function(e,a){f=a[0],c(2),r("asian",2),o()}]))}function c(e){var a=[],t=[],n=[];y=[];var r=[];f.forEach(function(e){E.asian.indexOf(e.category)>-1&&a.push(e)}),h=d3.nest().key(function(e){return e.bigram}).entries(a),h.forEach(function(e){n.push({food:e.key,cuisines:e.values.length,total:d3.sum(e.values.map(function(e){return e.count})),values:e.values})}),p=d3.nest().key(function(e){return e.category}).entries(a),p.forEach(function(e){t.push({cuisine:e.key,count:O[e.key]})}),m=n.sort(function(e,a){return+a.cuisines-+e.cuisines||+a.total-+e.total}),t=t.sort(function(e,a){return+a.count-+e.count}),y=m.slice(1,2),g=y.map(function(e){return e.food}),r=t.map(function(e){return e.cuisine}),C.asian=r,b.asian=g,k.asian=y}Object.defineProperty(a,"__esModule",{value:!0});var u=d3.select(".widget"),d=u.select(".graphic"),f=null,h=null,p=null,m=null,g=null,y=null,v="asian",S=1,C={asian:null,other:null,all:null},b={asian:null,other:null,all:null},k={asian:null,other:null,all:null},A=d3.select(".prose-text").node().offsetWidth,B=d3.select(".prose-text").node().offsetWidth,F=25,w=d3.scaleBand(),x=d3.scaleBand(),D=void 0,T=void 0,M=d.append("svg"),I=M.append("g"),H=M.append("g"),z=["#F5C162","#fd8d3c","#fc4e2a","#bd0026","#800026"],P=d3.scaleQuantile().domain([0,.1,.2,.3,.4,.5]).range(z),O={"Home Cooking":1,Spanish:8,Chinese:139,Caterers:40,Asian:137,Italian:53,Mediterranean:27,European:20,Thai:18,American:130,"Contemporary American":13,Mexican:27,"Latin American":18,Pizza:21,"Hamburgers and Hot Dogs":8,Burgers:13,"Hot Dogs":5,Continental:13,"Breakfast and Brunch":53,"Middle Eastern and African":1,"Middle Eastern":8,Vegetarian:16,Steakhouse:7,Chicken:6,"Bar and Grills":8,Dessert:5,"Steak Houses":3,Healthy:11,Greek:7,"Vegetarian Friendly":33,"Family Style":42,"Take Out":37,"Food Delivery Service":1,"Fast Food":35,"Delivery Service":3,Delivery:3,"Sandwiches/Subs":1,"Desserts/Ice Cream":1,Seafood:55,"Traditional American":14,Southern:3,Latin:5,Southwestern:3,"Steak House":3,"American (Traditional)":1,"Coffee and Espresso":11,"Coffee Shops":18,"Coffee House":9,"Coffee and Tea":17,Barbecue:10,Bakery:7,"Natural and Organic Foods":3,"Deli and Sandwich":17,Cafe:22,Bar:42,"Dim Sum":16,Mongolian:3,Sushi:23,Japanese:65,"Asian/Pacific":21,"Noodle Shop":6,"Gluten Free Options":11,"Southeast Asian":12,"Sandwich Shops":10,Sandwiches:11,"Breakfast Brunch and Lunch":18,"Sports Bars":1,Breakfast:14,"Brunch and Lunch":12,Pubs:11,Pub:10,Soups:11,Burger:1,Diners:4,"Night Clubs":5,Bars:9,"Cocktail Lounges":1,"Dance Clubs":1,"Contemporary Asian":1,Lounge:1,Vegan:3,"Health Food":5,French:29,"Fine Dining":5,"Tapas / Small Plates":4,"Contemporary French / American":1,Chain:4,"Sushi Bars":10,Delicatessen:2,Delicatessens:9,Malaysian:3,Vietnamese:10,"Vegan Options":12,"Ice Cream and Frozen Desserts":3,Cafeterias:8,"Ice Cream":4,Bagels:3,"Donut Shops":2,Bakeries:5,Donuts:2,Deli:5,Yogurt:2,Diner:4,Contemporary:3,Beverages:2,"Fast food":1,Bistro:2,"Bar Food":2,Hawaiian:5,Taverns:5,Cheesesteak:1,Hamburgers:4,Korean:6,Californian:12,"New American":3,"Food Trucks":1,"Southern / Soul":1,"Asian Fusion":2,Fusion:5,German:1,Filipino:1,Indian:11,"Gastro Pub":1,Brasserie:1,"Comfort Food":3,"Brazilian Steakhouse":1,Caribbean:2,Cuban:1,"Banquet Halls and Reception Facilities":3,"Creole and Cajun":1,Irish:9,"Supermarkets and Super Stores":1,Kosher:1,Brazilian:2,"South American":1,"Wine Bar":1,Steak:1,Fries:1,Shakes:1,"Cajun/Creole":1,Turkish:1,Cambodian:1,Taiwanese:2,"Meat Markets":1,Ramen:1,"Juice and Smoothies":1,"Bubble Tea":1,"Grocery Stores":1,"Coffee and Tea-Wholesale and Manufacturers":1,Provencal:1,Omelets:1,"Ice Cream and Desserts":2,Singaporean:1,Crepes:1,Polynesian:1,Salad:1},E={asian:["Chinese","Japanese","Thai","Indian","Vietnamese"],other:["American","Italian","French","Mediterranean","Mexican"]};a.default={init:l,resize:o}},function(e,a,t){"use strict";function n(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}function r(e,a){F=30,F=A<500?15:A<600&&A>=501?20:30;var t=C[e],n=b[e];w.domain(t).range([0,t.length*(F+2)]),x.domain(n).range([0,n.length*(F+2)]),D=d3.axisTop(w),T=d3.axisLeft(x),M.at("width",t.length*(F+2)+200).at("height",n.length*(F+2)+150).style("overflow","visible"),I.at("transform","translate(120, 60)").style("stroke-width",0).call(D).selectAll("text").style("text-anchor","start").at("transform",function(){return A<640?"rotate(-90) translate(3, 13)":"rotate(-55) translate(3, 10)"}).style("font-size",12).style("font-weight",700),H.at("transform","translate(120, 60)").style("stroke-width",0).call(T).selectAll("text").style("font-size",12).at("transform","translate(4, 2)").style("font-weight",700)}function i(e,a){c(a),d3.selectAll("text.widget2-svg").remove(),d3.selectAll("rect.widget2-svg").remove();var t=C[e],n=b[e];F=30,"all"==e?F=20:A<500?F=15:A<640&&A>=501?F=25:B>1300&&(F=30),w.domain(t).range([0,t.length*(F+2)]),x.domain(n).range([0,n.length*(F+2)]),D=d3.axisTop(w),T=d3.axisLeft(x),M.at("width",t.length*(F+2)+200).at("height",160).at("class",e).style("overflow","visible");var r=d3.tip().offset([-20,0]).attr("class","d3-tip-heatmap").html(function(e,a,t,n){return"<span class='bold'>"+e+"</span><br>Occurs in <span class='bold'>"+parseInt(100*t)+"%</span> of <span class='bold'>"+n+" "+a+" </span>restaurants"});M.call(r),I.transition().call(D).selectAll("text").style("text-anchor","start").at("transform","rotate(-55) translate(3, 10)").style("font-size",12).style("font-weight",700),H.transition().call(T).selectAll("text").style("font-size",12).at("transform","translate(4, 2)").style("font-weight",700),k[e].forEach(function(e){e.values.forEach(function(e){M.append("rect").at("class","widget2-svg").at("x",w(e.category)+123).at("y",x(e.bigram)+63).at("width",F).at("height",F).at("rx",5).at("ry",5).style("fill",function(){return isNaN(w(e.category))?"none":P(e.count/O[e.category])}),M.append("text").at("class","h-text widget2-svg").at("x",w(e.category)+123+F/2).at("y",x(e.bigram)+63+F/2).text(function(){return parseInt(e.count/O[e.category]*100)})})})}function s(){}function o(){A=d3.select(".prose-text").node().offsetWidth,s(),i(v,S)}function l(){var e,a=["finiti/shared_food"].map(function(e){return"assets/data/"+e+".csv"});(e=d3).loadData.apply(e,n(a).concat([function(e,a){f=a[0],c(2),r("asian",2),o()}]))}function c(e){var a=[],t=[],n=[];y=[];var r=[];f.forEach(function(e){E.asian.indexOf(e.category)>-1&&a.push(e)}),h=d3.nest().key(function(e){return e.bigram}).entries(a),h.forEach(function(e){"chicken curry"!=e.key&&"egg roll"!=e.key&&"miso soup"!=e.key||n.push({food:e.key,cuisines:e.values.length,total:d3.sum(e.values.map(function(e){return e.count})),values:e.values})}),p=d3.nest().key(function(e){return e.category}).entries(a),p.forEach(function(e){t.push({cuisine:e.key,count:O[e.key]})}),m=n.sort(function(e,a){return+a.cuisines-+e.cuisines||+a.total-+e.total}),t=t.sort(function(e,a){return+a.count-+e.count}),y=m,g=y.map(function(e){return e.food}),r=t.map(function(e){return e.cuisine}),C.asian=r,b.asian=g,k.asian=y}Object.defineProperty(a,"__esModule",{value:!0});var u=d3.select(".widget2"),d=u.select(".graphic"),f=null,h=null,p=null,m=null,g=null,y=null,v="asian",S=1,C={asian:null,other:null,all:null},b={asian:null,other:null,all:null},k={asian:null,other:null,all:null},A=d3.select(".prose-text").node().offsetWidth,B=d3.select(".prose-text").node().offsetWidth,F=25,w=d3.scaleBand(),x=d3.scaleBand(),D=void 0,T=void 0,M=d.append("svg"),I=M.append("g"),H=M.append("g"),z=["#F5C162","#fd8d3c","#fc4e2a","#bd0026","#800026"],P=d3.scaleQuantile().domain([0,.1,.2,.3,.4,.5]).range(z),O={"Home Cooking":1,Spanish:8,Chinese:139,Caterers:40,Asian:137,Italian:53,Mediterranean:27,European:20,Thai:18,American:130,"Contemporary American":13,Mexican:27,"Latin American":18,Pizza:21,"Hamburgers and Hot Dogs":8,Burgers:13,"Hot Dogs":5,Continental:13,"Breakfast and Brunch":53,"Middle Eastern and African":1,"Middle Eastern":8,Vegetarian:16,Steakhouse:7,Chicken:6,"Bar and Grills":8,Dessert:5,"Steak Houses":3,Healthy:11,Greek:7,"Vegetarian Friendly":33,"Family Style":42,"Take Out":37,"Food Delivery Service":1,"Fast Food":35,"Delivery Service":3,Delivery:3,"Sandwiches/Subs":1,"Desserts/Ice Cream":1,Seafood:55,"Traditional American":14,Southern:3,Latin:5,Southwestern:3,"Steak House":3,"American (Traditional)":1,"Coffee and Espresso":11,"Coffee Shops":18,"Coffee House":9,"Coffee and Tea":17,Barbecue:10,Bakery:7,"Natural and Organic Foods":3,"Deli and Sandwich":17,Cafe:22,Bar:42,"Dim Sum":16,Mongolian:3,Sushi:23,Japanese:65,"Asian/Pacific":21,"Noodle Shop":6,"Gluten Free Options":11,"Southeast Asian":12,"Sandwich Shops":10,Sandwiches:11,"Breakfast Brunch and Lunch":18,"Sports Bars":1,Breakfast:14,"Brunch and Lunch":12,Pubs:11,Pub:10,Soups:11,Burger:1,Diners:4,"Night Clubs":5,Bars:9,"Cocktail Lounges":1,"Dance Clubs":1,"Contemporary Asian":1,Lounge:1,Vegan:3,"Health Food":5,French:29,"Fine Dining":5,"Tapas / Small Plates":4,"Contemporary French / American":1,Chain:4,"Sushi Bars":10,Delicatessen:2,Delicatessens:9,Malaysian:3,Vietnamese:10,"Vegan Options":12,"Ice Cream and Frozen Desserts":3,Cafeterias:8,"Ice Cream":4,Bagels:3,"Donut Shops":2,Bakeries:5,Donuts:2,Deli:5,Yogurt:2,Diner:4,Contemporary:3,Beverages:2,"Fast food":1,Bistro:2,"Bar Food":2,Hawaiian:5,Taverns:5,Cheesesteak:1,Hamburgers:4,Korean:6,Californian:12,"New American":3,"Food Trucks":1,"Southern / Soul":1,"Asian Fusion":2,Fusion:5,German:1,Filipino:1,Indian:11,"Gastro Pub":1,Brasserie:1,"Comfort Food":3,"Brazilian Steakhouse":1,Caribbean:2,Cuban:1,"Banquet Halls and Reception Facilities":3,"Creole and Cajun":1,Irish:9,"Supermarkets and Super Stores":1,Kosher:1,Brazilian:2,"South American":1,"Wine Bar":1,Steak:1,Fries:1,Shakes:1,"Cajun/Creole":1,Turkish:1,Cambodian:1,Taiwanese:2,"Meat Markets":1,Ramen:1,"Juice and Smoothies":1,"Bubble Tea":1,"Grocery Stores":1,"Coffee and Tea-Wholesale and Manufacturers":1,Provencal:1,Omelets:1,"Ice Cream and Desserts":2,Singaporean:1,Crepes:1,Polynesian:1,Salad:1},E={asian:["Chinese","Japanese","Thai","Indian","Vietnamese"],other:["American","Italian","French","Mediterranean","Mexican"]};a.default={init:l,resize:o}},function(e,a,t){"use strict";function n(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}function r(e,a,t,n,r){F=30,A<500?F=20:A<640&&A>=501?F=22:A>1300&&(F=30);var i=S[e],s=C[e];w.domain(i).range([0,i.length*(F+2)]),x.domain(s).range([0,s.length*(F+2)]),D=d3.axisTop(w),T=d3.axisLeft(x),t.at("width",i.length*(F+2)+200).at("height",s.length*(F+2)+150).style("overflow","visible"),n.at("transform","translate(150, 80)").style("stroke-width",0).call(D).selectAll("text").style("text-anchor","start").at("transform",function(){return A<640?"rotate(-90) translate(3, 13)":"rotate(-55) translate(3, 10)"}).style("font-size",12).style("font-weight",700),r.at("transform","translate(150, 80)").style("stroke-width",0).call(T).selectAll("text").style("font-size",12).at("transform","translate(4, 2)").style("font-weight",700)}function i(e,a,t,n,r){c(a),t.selectAll(".heatmap").remove();var i=S[e],s=C[e];F=22,A<500?F=20:A<640&&A>=501?F=22:B>1300&&(F=30),w.domain(i).range([0,i.length*(F+1)]),x.domain(s).range([0,s.length*(F+1)]),D=d3.axisTop(w),T=d3.axisLeft(x),t.at("width",i.length*(F+1)+200).at("height",s.length*(F+1)+130).at("class",e).style("overflow","visible");var o=d3.tip().offset([-20,0]).attr("class","d3-tip-heatmap").html(function(e,a,t,n){return"<span class='bold'>"+e+"</span><br>Occurs in <span class='bold'>"+parseInt(100*t)+"%</span> of <span class='bold'>"+n+" "+a+" </span>restaurants"});t.call(o),n.transition().call(D).selectAll("text").style("text-anchor","start").at("transform",function(){return A<640?"rotate(-90) translate(3, 13)":"rotate(-55) translate(3, 10)"}).style("font-size",12).style("font-weight",700),r.transition().call(T).selectAll("text").style("font-size",12).at("transform","translate(4, 2)").style("font-weight",700),b[e].forEach(function(e){e.values.forEach(function(e){t.append("rect").at("class","heatmap b-"+e.bigram.replace(/ /g,"_")+" c-"+e.category.replace(/ /g,"_")).at("x",function(){return isNaN(w(e.category))?0:w(e.category)+153}).at("y",x(e.bigram)+83).at("width",F).at("height",F).at("rx",5).at("ry",5).style("fill",function(){return isNaN(w(e.category))?"none":G(e.count/_[e.category])}).on("mouseover",function(){t.selectAll("rect.heatmap:not(.b-"+e.bigram.replace(/ /g,"_")+")").transition().style("opacity",.1),t.selectAll("text.heatmap.b-"+e.bigram.replace(/ /g,"_")).transition().style("opacity",1),o.show(e.bigram,e.category,e.count/_[e.category],_[e.category])}).on("mouseleave",function(){t.selectAll("rect.heatmap").transition().style("opacity",1),t.selectAll("text.heatmap").transition().style("opacity",0),o.hide(e.bigram,e.category,e.count/_[e.category],_[e.category])}),t.append("text").at("class","heatmap h-text b-"+e.bigram.replace(/ /g,"_")+" c-"+e.category.replace(/ /g,"_")).at("x",function(){return isNaN(w(e.category))?0:w(e.category)+153+F/2}).at("y",x(e.bigram)+83+F/2).text(function(){return isNaN(w(e.category))?"":parseInt(e.count/_[e.category]*100)}).style("opacity",0).on("mouseover",function(){t.selectAll("rect.heatmap:not(.b-"+e.bigram.replace(/ /g,"_")+")").transition().style("opacity",.1),t.selectAll("text.heatmap.b-"+e.bigram.replace(/ /g,"_")).transition().style("opacity",1),o.show(e.bigram,e.category,e.count/_[e.category],_[e.category])}).on("mouseleave",function(){t.selectAll("rect.heatmap").transition().style("opacity",1),t.selectAll("text.heatmap").transition().style("opacity",0),o.hide(e.bigram,e.category,e.count/_[e.category],_[e.category])})})})}function s(){}function o(){A=d3.select(".prose-text").node().offsetWidth,B=d3.select(".graphic").node().offsetWidth,s(),i("asian",v,M,z,P),i("other",v,I,O,E),i("all",v,H,L,V)}function l(){var e,a=["finiti/shared_food"].map(function(e){return"assets/data/"+e+".csv"});(e=d3).loadData.apply(e,n(a).concat([function(e,a){f=a[0],c(25),r("asian",25,M,z,P),r("other",25,I,O,E),r("all",25,H,L,V),o()}]))}function c(e){for(var a=0;a<3;a++)!function(a){var t=[],n=[],r=[];y=[];var i=[];2!=a?(f.forEach(function(e){j[k[a]].indexOf(e.category)>-1&&t.push(e)}),h=d3.nest().key(function(e){return e.bigram}).entries(t),h.forEach(function(e){var t=e.values.map(function(e){if(j[k[a]].includes(e.category))return+e.count});r.push({food:e.key,cuisines:t.length,total:d3.sum(t),values:e.values})}),p=d3.nest().key(function(e){return e.category}).entries(t),p.forEach(function(e){n.push({cuisine:e.key,count:_[e.key]})}),m=r.sort(function(e,a){return+a.cuisines-e.cuisines||+a.total-+e.total}),n=n.sort(function(e,a){return+a.count-+e.count}),y=m.slice(e-25,e),g=y.map(function(e){return e.food}),i=n.map(function(e){return e.cuisine}),S[k[a]]=i,C[k[a]]=g):(h=d3.nest().key(function(e){return e.bigram}).entries(f),h.forEach(function(e){var a=[];e.values.forEach(function(e){(j.asian.includes(e.category)||j.other.includes(e.category))&&a.push(+e.count)}),r.push({food:e.key,cuisines:a.length,total:d3.sum(a),values:e.values})}),m=r.sort(function(e,a){return+a.cuisines-e.cuisines||+a.total-+e.total}),y=m.slice(e-25,e),g=y.map(function(e){return e.food}),S[k[a]]=S.asian.concat(S.other),C[k[a]]=g),b[k[a]]=y}(a)}Object.defineProperty(a,"__esModule",{value:!0});var u=d3.select(".part3-test"),d=u.select(".graphic"),f=(u.select(".graphic-all"),null),h=null,p=null,m=null,g=null,y=null,v=25,S={asian:null,other:null,all:null},C={asian:null,other:null,all:null},b={asian:null,other:null,all:null},k=["asian","other","all"],A=d3.select(".prose-text").node().offsetWidth,B=d3.select(".graphic").node().offsetWidth,F=25,w=d3.scaleBand(),x=d3.scaleBand(),D=void 0,T=void 0,M=d.append("svg"),I=d.append("svg"),H=d.append("svg"),z=M.append("g"),P=M.append("g"),O=I.append("g"),E=I.append("g"),L=H.append("g"),V=H.append("g");d3.select("button.top25").on("click",function(){v=25,i("asian",v,M,z,P),i("other",v,I,O,E),i("all",v,H,L,V)}),d3.select("button.top50").on("click",function(){v=50,i("asian",v,M,z,P),i("other",v,I,O,E),i("all",v,H,L,V)}),d3.select("button.top75").on("click",function(){v=75,i("asian",v,M,z,P),i("other",v,I,O,E),i("all",v,H,L,V)}),d3.select("button.top100").on("click",function(){v=100,i("asian",v,M,z,P),i("other",v,I,O,E),i("all",v,H,L,V)});var N=["#F5C162","#F5C162","#fd8d3c","#fc4e2a","#bd0026","#800026"],G=d3.scaleQuantile().domain([0,.1,.2,.3,.4,.5]).range(N),_={"Home Cooking":1,Spanish:8,Chinese:139,Caterers:40,Asian:137,Italian:53,Mediterranean:27,European:20,Thai:18,American:130,"Contemporary American":13,Mexican:27,"Latin American":18,Pizza:21,"Hamburgers and Hot Dogs":8,Burgers:13,"Hot Dogs":5,Continental:13,"Breakfast and Brunch":53,"Middle Eastern and African":1,"Middle Eastern":8,Vegetarian:16,Steakhouse:7,Chicken:6,"Bar and Grills":8,Dessert:5,"Steak Houses":3,Healthy:11,Greek:7,"Vegetarian Friendly":33,"Family Style":42,"Take Out":37,"Food Delivery Service":1,"Fast Food":35,"Delivery Service":3,Delivery:3,"Sandwiches/Subs":1,"Desserts/Ice Cream":1,Seafood:55,"Traditional American":14,Southern:3,Latin:5,Southwestern:3,"Steak House":3,"American (Traditional)":1,"Coffee and Espresso":11,"Coffee Shops":18,"Coffee House":9,"Coffee and Tea":17,Barbecue:10,Bakery:7,"Natural and Organic Foods":3,"Deli and Sandwich":17,Cafe:22,Bar:42,"Dim Sum":16,Mongolian:3,Sushi:23,Japanese:65,"Asian/Pacific":21,"Noodle Shop":6,"Gluten Free Options":11,"Southeast Asian":12,"Sandwich Shops":10,Sandwiches:11,"Breakfast Brunch and Lunch":18,"Sports Bars":1,Breakfast:14,"Brunch and Lunch":12,Pubs:11,Pub:10,Soups:11,Burger:1,Diners:4,"Night Clubs":5,Bars:9,"Cocktail Lounges":1,"Dance Clubs":1,"Contemporary Asian":1,Lounge:1,Vegan:3,"Health Food":5,French:29,"Fine Dining":5,"Tapas / Small Plates":4,"Contemporary French / American":1,Chain:4,"Sushi Bars":10,Delicatessen:2,Delicatessens:9,Malaysian:3,Vietnamese:10,"Vegan Options":12,"Ice Cream and Frozen Desserts":3,Cafeterias:8,"Ice Cream":4,Bagels:3,"Donut Shops":2,Bakeries:5,Donuts:2,Deli:5,Yogurt:2,Diner:4,Contemporary:3,Beverages:2,"Fast food":1,Bistro:2,"Bar Food":2,Hawaiian:5,Taverns:5,Cheesesteak:1,Hamburgers:4,Korean:6,Californian:12,"New American":3,"Food Trucks":1,"Southern / Soul":1,"Asian Fusion":2,Fusion:5,German:1,Filipino:1,Indian:11,"Gastro Pub":1,Brasserie:1,"Comfort Food":3,"Brazilian Steakhouse":1,Caribbean:2,Cuban:1,"Banquet Halls and Reception Facilities":3,"Creole and Cajun":1,Irish:9,"Supermarkets and Super Stores":1,Kosher:1,Brazilian:2,"South American":1,"Wine Bar":1,Steak:1,Fries:1,Shakes:1,"Cajun/Creole":1,Turkish:1,Cambodian:1,Taiwanese:2,"Meat Markets":1,Ramen:1,"Juice and Smoothies":1,"Bubble Tea":1,"Grocery Stores":1,"Coffee and Tea-Wholesale and Manufacturers":1,Provencal:1,Omelets:1,"Ice Cream and Desserts":2,Singaporean:1,Crepes:1,Polynesian:1,Salad:1},j={asian:["Chinese","Japanese","Thai","Indian","Vietnamese"],other:["American","Italian","French","Mediterranean","Mexican"]};a.default={init:l,resize:o}},function(e,a,t){"use strict";function n(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return Array.from(e)}function r(){for(var e=null,a=0;a<h.length;a++)e=c.append("div.menu"),function(a){e.append("p.menu-title").html(a),e.append("p.menu-subtitle").html(g[a]+" restaurants");var t=e.append("svg"),n=f[a].slice(0,15),r=$(".menu").width();t.at("class","tables2").at("width",r).at("height",215).style("overflow","visible");var i=d3.scaleLinear().domain([0,1]).range([0,r/2]),s=d3.axisTop(i).tickValues([0,.25,.5,.75,1]).tickSize(-169).tickFormat(d3.format(".0%")),o=(t.append("g").at("transform","translate(100, 20)").at("class","grid2").style("stroke-dasharray","3 3").call(s).selectAll("text").style("font-size","12px !important"),d3.scaleBand().domain(n.map(function(e){return e.bigram})).range([20,195]));t.append("g").at("class","axis").at("transform","translate(100, 0)").call(d3.axisLeft(o)).selectAll("text").style("font-size","12px !important"),t.selectAll("rect.chart").data(n).enter().append("rect").at("class","bar-rect2").at("x",i(0)+100).at("y",function(e){return o(e.bigram)}).at("width",function(e){return i(e.count/g[e.category])}).at("height",10).style("fill",function(e){return parseInt(e.count/g[e.category]*100)>0?"#BF3841":"#ECA94A"})}(h[a])}function i(){if((p=d3.select(".graphic").node().offsetWidth)>800){var e=$(".menu").width();d3.selectAll(".tables2").transition().at("width",e);var a=d3.scaleLinear().domain([0,1]).range([0,e/2]),t=d3.axisTop(a).tickValues([0,.25,.5,.75,1]).tickSize(-169).tickFormat(d3.format(".0%"));d3.selectAll(".grid2").style("stroke-dasharray","3 3").call(t).selectAll("text").style("font-size","12px !important"),d3.selectAll(".bar-rect2").transition().at("width",function(e){return a(e.count/g[e.category])})}}function s(){var e,a=["finiti/shared_food"].map(function(e){return"assets/data/"+e+".csv"});(e=d3).loadData.apply(e,n(a).concat([function(e,a){u=a[0],o(),r(),i()}]))}function o(){var e=[],a=[];u.forEach(function(a){(y.asian.includes(a.category)||y.other.includes(a.category))&&e.push(a)}),d=d3.nest().key(function(e){return e.bigram}).entries(e);d.forEach(function(e){function t(a){1==n.length&&e.values[0].category==a?f[a].push(e.values[0]):2==n.length&&(e.values[0].category==a&&"Asian"==e.values[1].category?f[a].push(e.values[0]):"Asian"==e.values[0].category&&e.values[1].category==a&&f[a].push(e.values[1]))}var n=e.values.map(function(e){return+e.count});a.push({food:e.key,cuisines:n.length,total:d3.sum(n),values:e.values}),t("Chinese"),t("Vietnamese"),t("Japanese"),t("Thai"),t("Indian")}),f.Chinese.sort(function(e,a){return+a.count-+e.count}),f.Japanese.sort(function(e,a){return+a.count-+e.count}),f.Vietnamese.sort(function(e,a){return+a.count-+e.count}),f.Indian.sort(function(e,a){return+a.count-+e.count}),f.Thai.sort(function(e,a){return+a.count-+e.count})}Object.defineProperty(a,"__esModule",{value:!0});var l=d3.select(".part3-asian"),c=l.select(".graphic"),u=null,d=null,f={Chinese:[],Japanese:[],Vietnamese:[],Thai:[],Indian:[]},h=["Chinese","Japanese","Vietnamese","Thai","Indian"],p=d3.select(".prose-text").node().offsetWidth,m=(d3.select(".graphic").node().offsetWidth,["#F5C162","#F5C162","#fd8d3c","#fc4e2a","#bd0026","#800026"]),g=(d3.scaleQuantile().domain([0,.1,.2,.3,.4,.5]).range(m),{"Home Cooking":1,Spanish:8,Chinese:139,Caterers:40,Asian:137,Italian:53,Mediterranean:27,European:20,Thai:18,American:130,"Contemporary American":13,Mexican:27,"Latin American":18,Pizza:21,"Hamburgers and Hot Dogs":8,Burgers:13,"Hot Dogs":5,Continental:13,"Breakfast and Brunch":53,"Middle Eastern and African":1,"Middle Eastern":8,Vegetarian:16,Steakhouse:7,Chicken:6,"Bar and Grills":8,Dessert:5,"Steak Houses":3,Healthy:11,Greek:7,"Vegetarian Friendly":33,"Family Style":42,"Take Out":37,"Food Delivery Service":1,"Fast Food":35,"Delivery Service":3,Delivery:3,"Sandwiches/Subs":1,"Desserts/Ice Cream":1,Seafood:55,"Traditional American":14,Southern:3,Latin:5,Southwestern:3,"Steak House":3,"American (Traditional)":1,"Coffee and Espresso":11,"Coffee Shops":18,"Coffee House":9,"Coffee and Tea":17,Barbecue:10,Bakery:7,"Natural and Organic Foods":3,"Deli and Sandwich":17,Cafe:22,Bar:42,"Dim Sum":16,Mongolian:3,Sushi:23,Japanese:65,"Asian/Pacific":21,"Noodle Shop":6,"Gluten Free Options":11,"Southeast Asian":12,"Sandwich Shops":10,Sandwiches:11,"Breakfast Brunch and Lunch":18,"Sports Bars":1,Breakfast:14,"Brunch and Lunch":12,Pubs:11,Pub:10,Soups:11,Burger:1,Diners:4,"Night Clubs":5,Bars:9,"Cocktail Lounges":1,"Dance Clubs":1,"Contemporary Asian":1,Lounge:1,Vegan:3,"Health Food":5,French:29,"Fine Dining":5,"Tapas / Small Plates":4,"Contemporary French / American":1,Chain:4,"Sushi Bars":10,Delicatessen:2,Delicatessens:9,Malaysian:3,Vietnamese:10,"Vegan Options":12,"Ice Cream and Frozen Desserts":3,Cafeterias:8,"Ice Cream":4,Bagels:3,"Donut Shops":2,Bakeries:5,Donuts:2,Deli:5,Yogurt:2,Diner:4,Contemporary:3,Beverages:2,"Fast food":1,Bistro:2,"Bar Food":2,Hawaiian:5,Taverns:5,Cheesesteak:1,Hamburgers:4,Korean:6,Californian:12,"New American":3,"Food Trucks":1,"Southern / Soul":1,"Asian Fusion":2,Fusion:5,German:1,Filipino:1,Indian:11,"Gastro Pub":1,Brasserie:1,"Comfort Food":3,"Brazilian Steakhouse":1,Caribbean:2,Cuban:1,"Banquet Halls and Reception Facilities":3,"Creole and Cajun":1,Irish:9,"Supermarkets and Super Stores":1,Kosher:1,Brazilian:2,"South American":1,"Wine Bar":1,Steak:1,Fries:1,Shakes:1,"Cajun/Creole":1,Turkish:1,Cambodian:1,Taiwanese:2,"Meat Markets":1,Ramen:1,"Juice and Smoothies":1,"Bubble Tea":1,"Grocery Stores":1,"Coffee and Tea-Wholesale and Manufacturers":1,Provencal:1,Omelets:1,"Ice Cream and Desserts":2,Singaporean:1,Crepes:1,Polynesian:1,Salad:1}),y={asian:["Chinese","Japanese","Thai","Indian","Vietnamese","Asian"],other:["American","Italian","French","Mediterranean","Mexican"]};a.default={init:s,resize:i}}]);